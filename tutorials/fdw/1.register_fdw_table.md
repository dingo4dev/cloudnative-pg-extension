# Register the foreign data wrapper

## Oracle Foreign Data Wrapper

1. Install the Oracle Foreign Data Wrapper extension in PostgreSQL:

    ```sql
    CREATE EXTENSION IF NOT EXISTS oracle_fdw;
    ```

2. Create a server for the Oracle database:

    ```sql
    CREATE SERVER oracle_server
        FOREIGN DATA WRAPPER oracle_fdw
        OPTIONS (dbserver '//oracle_host:1521/orcl');
    ```

    or using a TNS connection string:

    ```sql
    -- or connect with TNS service
    CREATE SERVER oracle_server
    FOREIGN DATA WRAPPER oracle_fdw
    OPTIONS (dbserver
    '(description=(load_balance=on)(failover=on)
    (address_list=(source_route=yes)
        (address=(protocol=tcp)(host=oracle-host)(port=1521))
        (address=(protocol=tcp)(host=oracle-host)(port=1522))
    )
    (connect_data=(service_name=ORCLPDB1)))');
    ```

Replace `oracle-host` with your Oracle server's hostname or IP address, and `ORCLPDB1` with your Oracle service name.

3. Create a user mapping for the Oracle FDW:

    ```sql
    CREATE USER MAPPING FOR CURRENT_USER
    SERVER oracle_server
    OPTIONS (user 'oracle_user', password 'oracle_password');
    ```

Replace `oracle_user` and `oracle_password` with your Oracle database credentials.

4. Create a foreign table that maps to an Oracle table:

    ```sql
    CREATE FOREIGN TABLE oracle_employees (
        employee_id integer,
        first_name text,
        last_name text,
        updated_at timestamp(6) DEFAULT now() NULL
    )
    SERVER oracle_server
    OPTIONS (schema 'HR', table 'EMPLOYEES');
    ```

5. Query the foreign table to verify the connection:

    ```sql
    SELECT * FROM oracle_employees LIMIT 10;
    ```